<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:replace="customer/cus_layout::head"></th:block>
    <title>Product Details | E-Shopper</title>
</head><!--/head-->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
    function img() {
        let img = document.getElementsByTagName("img");
        for (let i = 0; i < img.length; i++) {
            let src = img[i].getAttribute("src");
            img[i].setAttribute("src", "../../../" + src);
        }
    }
</script>
<script type="text/javascript">
    function addProductToCartD(e){
        let idProduct = e.getAttribute("href");
        $.ajax({
            type: "GET",
            url: "/customer/addProductToCart/" + idProduct,
            success: function (data) {
                let length = data.length;
                document.getElementById("number").innerHTML = length;
            }
        })
    }
</script>
<body onload="img()">
<th:block th:replace="/customer/cus_layout::user-header(name=${currentUser.getName()})"></th:block>
<section>
    <div class="container">
        <div class="row">
            <div class="col-sm-9 padding-right">
                <div class="product-details"><!--product-details-->
                    <div class="col-sm-5">
                        <div class="view-product">
                            <img th:src="'../../../'+${product.getImage()}" alt=""/>
                        </div>
                    </div>
                    <div class="col-sm-7">
                        <div class="product-information" id="edit-form" style="display: none"><!--sign up form-->
                            <form method="post" th:object="${product}" action="/products/edit"
                                  enctype="multipart/form-data">
                                <input type="hidden" name="id" th:value="${product.getProductId()}"
                                       th:field="*{productId}">
                                <label for="">Name:</label>
                                <input type="text" style="width: 200px" name="name" th:value="${product.getName()}"
                                       th:field="*{name}"/><br>
                                <span>
                                    <label>Price:</label>
									<input type="text" name="price" th:value="${product.getPrice()}" th:field="*{price}"
                                           style="width: 150px">
									<label>Quantity:</label>
									<input type="number" name="quantity" th:value="${product.getQuantity()}"/>
                                </span>
                                <input type="file" name="productImage" th:text="${product.getImage()}"/>

                                <br>
                                <label for="category">Category:</label>
                                <select name="category" id="category" th:field="*{category}">
                                    <option th:each="cate:${category}" th:value="${cate.categoryId}"
                                            th:text="${cate.name}"></option>
                                </select>
                                <br>
                                <labbel>Description:</labbel>
                                <textarea th:text="${product.getDescription()}" th:field="*{description}"></textarea>

                                <br><br>
                                <button type="submit" class="btn btn-fefault cart" onclick="editForm()">Save</button>
                            </form>
                        </div><!--/sign up form-->

                        <div class="product-information"><!--/product-information-->
                            <img src="images/product-details/new.jpg" class="newarrival" alt=""/>
                            <h2 th:text="${product.getName()}">Anne Klein Sleeveless Colorblock Scuba</h2>
                            <p th:text="${product.getShop().getName()}"></p>
                            <img src="images/product-details/rating.png" alt=""/>
                            <span>
									<span th:text="${product.getPrice()}">US </span>
									<label>Quantity:</label>
									<input type="text" th:value="${product.getQuantity()}" readonly/>
                            </span>
                            <hr>
                            <button type="button" class="btn btn-fefault cart" id="addtocart" th:href="${product.productId}" onclick="addProductToCartD(this)">ADD TO CART
                            </button>
                        </div><!--/product-information-->
                    </div>
                </div><!--/product-details-->

                <div class="category-tab shop-details-tab"><!--category-tab-->
                    <div class="col-sm-12">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#reviews" data-toggle="tab">Reviews</a></li>
                        </ul>
                    </div>
                    <div class="tab-content">
                        <div class="tab-pane fade active in" id="reviews">
                            <div class="col-sm-12">
                                <ul>
                                    <li th:text="${product.getCreateDate()}"><i class="fa fa-clock-o"></i>Create Date</li>
                                </ul>
                                <p th:text="${product.getDescription()}"></p>
                            </div>
                        </div>

                    </div>
                </div><!--/category-tab-->
            </div>
        </div>
    </div>
</section>

<footer th:replace="/layout::footer"><!--Footer--></footer><!--/Footer-->


<script src="/js/jquery.js"></script>
<script src="/js/price-range.js"></script>
<script src="/js/jquery.scrollUp.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/jquery.prettyPhoto.js"></script>
<script src="/js/main.js"></script>
</body>
</html>